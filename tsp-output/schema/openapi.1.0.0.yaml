openapi: 3.1.0
info:
  title: CloudPayments API
  description: API платежного шлюза CloudPayments для приема платежей по криптограмме
  version: 1.0.0
tags:
  - name: Payments
  - name: Subscriptions
  - name: Orders
paths:
  /orders/cancel:
    post:
      operationId: Orders_cancel
      summary: Отмена созданного счёта
      description: |-
        Отмена созданного счёта

        Отменяет ранее созданный счёт. После отмены оплата по ссылке невозможна.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmptyResponse'
      tags:
        - Orders
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCancelRequest'
  /orders/create:
    post:
      operationId: Orders_create
      summary: Создание счёта для отправки по почте
      description: |-
        Создание счёта для отправки по почте

        Создаёт ссылку на оплату и при необходимости отправляет уведомление
        плательщику по email, SMS или Viber.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/OrderModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Orders
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
  /payments/cards/auth:
    post:
      operationId: Cards_auth
      summary: Двухстадийная оплата по криптограмме
      description: |-
        Двухстадийная оплата по криптограмме

        Выполняет только авторизацию (холдирование средств).
        Для списания необходимо вызвать метод confirm.
        При необходимости 3-D Secure аутентификации возвращает данные для перенаправления на ACS.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    required:
                      - Success
                    properties:
                      Success:
                        type: boolean
                        description: Результат выполнения запроса
                      Message:
                        type: string
                        description: Описание ошибки (при наличии)
                      Model:
                        allOf:
                          - $ref: '#/components/schemas/TransactionModel'
                        description: Данные ответа
                    description: Базовый ответ API
                  - type: object
                    required:
                      - Success
                    properties:
                      Success:
                        type: boolean
                        description: Результат выполнения запроса
                      Message:
                        type: string
                        description: Описание ошибки (при наличии)
                      Model:
                        allOf:
                          - $ref: '#/components/schemas/ThreeDsRequiredModel'
                        description: Данные ответа
                    description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CryptogramPaymentRequest'
  /payments/cards/charge:
    post:
      operationId: Cards_charge
      summary: Одностадийная оплата по криптограмме
      description: |-
        Одностадийная оплата по криптограмме

        Выполняет оплату в одну стадию - авторизация и списание происходят одновременно.
        При необходимости 3-D Secure аутентификации возвращает данные для перенаправления на ACS.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    required:
                      - Success
                    properties:
                      Success:
                        type: boolean
                        description: Результат выполнения запроса
                      Message:
                        type: string
                        description: Описание ошибки (при наличии)
                      Model:
                        allOf:
                          - $ref: '#/components/schemas/TransactionModel'
                        description: Данные ответа
                    description: Базовый ответ API
                  - type: object
                    required:
                      - Success
                    properties:
                      Success:
                        type: boolean
                        description: Результат выполнения запроса
                      Message:
                        type: string
                        description: Описание ошибки (при наличии)
                      Model:
                        allOf:
                          - $ref: '#/components/schemas/ThreeDsRequiredModel'
                        description: Данные ответа
                    description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CryptogramPaymentRequest'
  /payments/cards/post3ds:
    post:
      operationId: Cards_post3ds
      summary: Завершение 3-D Secure аутентификации
      description: |-
        Завершение 3-D Secure аутентификации

        Вызывается после возврата плательщика с ACS.
        Параметр TransactionId соответствует MD, PaRes получается от ACS.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/TransactionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Post3dsRequest'
  /payments/confirm:
    post:
      operationId: Payments_confirm
      summary: Подтверждение двухстадийного платежа
      description: |-
        Подтверждение двухстадийного платежа

        Подтверждает ранее авторизованный платеж и инициирует списание средств.
        Сумма подтверждения может быть меньше или равна сумме авторизации.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmptyResponse'
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmRequest'
  /payments/refund:
    post:
      operationId: Payments_refund
      summary: Возврат средств
      description: |-
        Возврат средств

        Возвращает средства по завершенному платежу.
        Сумма возврата может быть меньше или равна сумме платежа.
        Возможны частичные возвраты.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/RefundModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefundRequest'
  /payments/tokens/auth:
    post:
      operationId: Tokens_auth
      summary: Двухстадийная оплата по токену
      description: |-
        Двухстадийная оплата по токену (рекарринг)

        Выполняет авторизацию (холдирование средств) по сохранённому токену карты.
        Для списания необходимо вызвать метод confirm.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/TransactionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenPaymentRequest'
  /payments/tokens/charge:
    post:
      operationId: Tokens_charge
      summary: Одностадийная оплата по токену
      description: |-
        Одностадийная оплата по токену (рекарринг)

        Выполняет оплату в одну стадию по сохранённому токену карты.
        Токен выдаётся системой после первой оплаты по криптограмме.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/TransactionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenPaymentRequest'
  /payments/void:
    post:
      operationId: Payments_voidPayment
      summary: Отмена платежа
      description: |-
        Отмена платежа

        Отменяет авторизованный платеж до его подтверждения.
        Применимо только для двухстадийных платежей.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmptyResponse'
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoidRequest'
  /subscriptions/cancel:
    post:
      operationId: Subscriptions_cancel
      summary: Отмена подписки на рекуррентные платежи
      description: |-
        Отмена подписки на рекуррентные платежи

        Отменяет активную подписку. Дальнейшие автоматические списания прекращаются.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmptyResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionCancelRequest'
  /subscriptions/create:
    post:
      operationId: Subscriptions_create
      summary: Создание подписки на рекуррентные платежи
      description: |-
        Создание подписки на рекуррентные платежи

        Создаёт план подписки для автоматического списания средств
        по указанному расписанию с использованием токена карты.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/SubscriptionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionCreateRequest'
  /subscriptions/find:
    post:
      operationId: Subscriptions_find
      summary: Поиск подписок
      description: |-
        Поиск подписок

        Возвращает список подписок для указанного пользователя.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    type: array
                    items:
                      $ref: '#/components/schemas/SubscriptionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionFindRequest'
  /subscriptions/get:
    post:
      operationId: Subscriptions_get
      summary: Запрос информации о подписке
      description: |-
        Запрос информации о подписке

        Возвращает текущий статус и параметры подписки.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/SubscriptionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionGetRequest'
  /subscriptions/update:
    post:
      operationId: Subscriptions_update
      summary: Изменение подписки на рекуррентные платежи
      description: |-
        Изменение подписки на рекуррентные платежи

        Изменяет параметры существующей подписки.
        Если подписка была отменена или завершена, изменение любого атрибута
        приведёт к её реактивации.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - Success
                properties:
                  Success:
                    type: boolean
                    description: Результат выполнения запроса
                  Message:
                    type: string
                    description: Описание ошибки (при наличии)
                  Model:
                    allOf:
                      - $ref: '#/components/schemas/SubscriptionModel'
                    description: Данные ответа
                description: Базовый ответ API
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionUpdateRequest'
components:
  schemas:
    CardType:
      type: string
      enum:
        - Visa
        - MasterCard
        - Maestro
        - MIR
      description: Тип карты
    CardTypeCode:
      type: number
      enum:
        - 0
        - 1
        - 2
        - 3
      description: Код типа карты
    ConfirmRequest:
      type: object
      required:
        - TransactionId
        - Amount
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции
        Amount:
          type: number
          format: double
          description: Сумма подтверждения
        JsonData:
          type: object
          unevaluatedProperties: {}
          description: Дополнительные данные (JSON)
      description: Запрос на подтверждение двухстадийного платежа
    CryptogramPaymentRequest:
      type: object
      required:
        - Amount
        - IpAddress
        - CardCryptogramPacket
      properties:
        Amount:
          type: number
          format: double
          description: Сумма платежа (до 2 знаков после точки)
        Currency:
          type: string
          description: Валюта (RUB по умолчанию)
        IpAddress:
          type: string
          description: IP-адрес плательщика
        CardCryptogramPacket:
          type: string
          description: Криптограмма платежных данных
        Name:
          type: string
          description: Имя держателя карты (латиница)
        PaymentUrl:
          type: string
          description: URL сайта, с которого выполняется оплата
        InvoiceId:
          type: string
          description: Номер заказа
        Description:
          type: string
          description: Описание платежа
        CultureName:
          type: string
          description: Язык уведомлений (ru-RU, en-US)
        AccountId:
          type: string
          description: Идентификатор пользователя
        Email:
          type: string
          description: Email плательщика
        Payer:
          allOf:
            - $ref: '#/components/schemas/Payer'
          description: Информация о плательщике
        JsonData:
          type: object
          unevaluatedProperties: {}
          description: Дополнительные данные (JSON)
        SaveCard:
          type: boolean
          description: Сохранить токен карты для повторных платежей
      description: Запрос на оплату по криптограмме
    CultureName:
      type: string
      enum:
        - ru-RU
        - en-US
      description: Язык уведомлений
    Currency:
      type: string
      enum:
        - RUB
        - USD
        - EUR
        - GBP
      description: Валюта платежа
    EmptyResponse:
      type: object
      required:
        - Success
      properties:
        Success:
          type: boolean
          description: Результат выполнения запроса
        Message:
          type: string
          description: Описание ошибки (при наличии)
      description: Пустой ответ API (только Success и Message)
    OrderCancelRequest:
      type: object
      required:
        - Id
      properties:
        Id:
          type: string
          description: Идентификатор заказа
      description: Запрос на отмену заказа (счёта)
    OrderCreateRequest:
      type: object
      required:
        - Amount
        - Description
      properties:
        Amount:
          type: number
          format: double
          description: Сумма платежа
        Currency:
          type: string
          description: Валюта (RUB по умолчанию)
        Description:
          type: string
          description: Описание платежа
        Email:
          type: string
          description: Email плательщика
        RequireConfirmation:
          type: boolean
          description: Требуется подтверждение (двухстадийная схема)
        SendEmail:
          type: boolean
          description: Отправить ссылку на email
        InvoiceId:
          type: string
          description: Номер заказа в системе мерчанта
        AccountId:
          type: string
          description: Идентификатор пользователя
        OfferUri:
          type: string
          description: Ссылка на оферту
        Phone:
          type: string
          description: Телефон плательщика
        SendSms:
          type: boolean
          description: Отправить ссылку по SMS
        SendViber:
          type: boolean
          description: Отправить ссылку через Viber
        CultureName:
          type: string
          description: Язык уведомлений (ru-RU, en-US)
        SubscriptionBehavior:
          type: string
          description: 'Поведение подписки: CreateWeekly, CreateMonthly'
        SuccessRedirectUrl:
          type: string
          description: URL редиректа при успешной оплате
        FailRedirectUrl:
          type: string
          description: URL редиректа при неуспешной оплате
        JsonData:
          type: object
          unevaluatedProperties: {}
          description: Дополнительные данные (JSON)
      description: Запрос на создание заказа (счёта)
    OrderModel:
      type: object
      required:
        - Id
        - Number
        - Amount
        - Currency
        - CurrencyCode
        - Description
        - RequireConfirmation
        - Url
        - CultureName
        - CreatedDate
        - CreatedDateIso
        - StatusCode
        - Status
        - InternalId
      properties:
        Id:
          type: string
          description: Идентификатор заказа
        Number:
          type: integer
          format: int32
          description: Номер заказа
        Amount:
          type: number
          format: double
          description: Сумма платежа
        Currency:
          type: string
          description: Валюта
        CurrencyCode:
          type: integer
          format: int32
          description: Код валюты
        Email:
          type: string
          description: Email плательщика
        Phone:
          type: string
          description: Телефон плательщика
        Description:
          type: string
          description: Описание платежа
        RequireConfirmation:
          type: boolean
          description: Требуется подтверждение (двухстадийная схема)
        Url:
          type: string
          description: Ссылка на оплату
        CultureName:
          type: string
          description: Язык
        CreatedDate:
          type: string
          description: Дата создания (формат /Date(...)/)
        CreatedDateIso:
          type: string
          description: Дата создания ISO
        PaymentDate:
          type: string
          description: Дата оплаты
        PaymentDateIso:
          type: string
          description: Дата оплаты ISO
        StatusCode:
          type: integer
          format: int32
          description: Код статуса
        Status:
          type: string
          description: Статус
        InternalId:
          type: integer
          format: int32
          description: Внутренний ID
      description: Модель заказа (счёта)
    Payer:
      type: object
      properties:
        FirstName:
          type: string
          description: Имя
        LastName:
          type: string
          description: Фамилия
        MiddleName:
          type: string
          description: Отчество
        Birth:
          type: string
          description: Дата рождения (YYYY-MM-DD)
        Street:
          type: string
          description: Улица
        Address:
          type: string
          description: Адрес
        City:
          type: string
          description: Город
        Country:
          type: string
          description: Страна (код ISO)
        Phone:
          type: string
          description: Телефон
        Postcode:
          type: string
          description: Почтовый индекс
      description: Информация о плательщике
    Post3dsRequest:
      type: object
      required:
        - TransactionId
        - PaRes
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции (значение параметра MD)
        PaRes:
          type: string
          description: Результат 3-D Secure аутентификации
      description: Запрос на завершение 3-D Secure аутентификации
    RefundModel:
      type: object
      required:
        - TransactionId
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции возврата
      description: Модель для ответа refund
    RefundRequest:
      type: object
      required:
        - TransactionId
        - Amount
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции оплаты
        Amount:
          type: number
          format: double
          description: Сумма возврата
        JsonData:
          type: object
          unevaluatedProperties: {}
          description: Дополнительные данные (JSON)
      description: Запрос на возврат средств
    StatusCode:
      type: number
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
      description: Статус транзакции (код)
    SubscriptionCancelRequest:
      type: object
      required:
        - Id
      properties:
        Id:
          type: string
          description: Идентификатор подписки
      description: Запрос на отмену подписки
    SubscriptionCreateRequest:
      type: object
      required:
        - Token
        - AccountId
        - Description
        - Amount
        - Currency
        - RequireConfirmation
        - StartDate
        - Interval
        - Period
      properties:
        Token:
          type: string
          description: Токен карты
        AccountId:
          type: string
          description: Идентификатор пользователя
        Description:
          type: string
          description: Описание платежа
        Email:
          type: string
          description: Email плательщика
        Amount:
          type: number
          format: double
          description: Сумма платежа
        Currency:
          type: string
          description: Валюта
        RequireConfirmation:
          type: boolean
          description: Требуется подтверждение (двухстадийная схема)
        StartDate:
          type: string
          format: date-time
          description: Дата и время первого платежа (UTC)
        Interval:
          type: string
          description: 'Интервал: Day, Week, Month'
        Period:
          type: integer
          format: int32
          description: Период (в сочетании с Interval)
        MaxPeriods:
          type: integer
          format: int32
          description: Максимальное количество платежей
        CustomerReceipt:
          type: object
          unevaluatedProperties: {}
          description: Данные для онлайн-чека
      description: Запрос на создание подписки
    SubscriptionFindRequest:
      type: object
      required:
        - AccountId
      properties:
        AccountId:
          type: string
          description: Идентификатор пользователя
      description: Запрос поиска подписок
    SubscriptionGetRequest:
      type: object
      required:
        - Id
      properties:
        Id:
          type: string
          description: Идентификатор подписки
      description: Запрос информации о подписке
    SubscriptionInterval:
      type: string
      enum:
        - Day
        - Week
        - Month
      description: Интервал подписки
    SubscriptionModel:
      type: object
      required:
        - Id
        - AccountId
        - Amount
        - CurrencyCode
        - Currency
        - RequireConfirmation
        - StartDate
        - StartDateIso
        - IntervalCode
        - Interval
        - Period
        - CultureName
        - StatusCode
        - Status
        - SuccessfulTransactionsNumber
        - FailedTransactionsNumber
      properties:
        Id:
          type: string
          description: Идентификатор подписки
        AccountId:
          type: string
          description: Идентификатор пользователя
        Description:
          type: string
          description: Описание платежа
        Email:
          type: string
          description: Email плательщика
        Amount:
          type: number
          format: double
          description: Сумма платежа
        CurrencyCode:
          type: integer
          format: int32
          description: Код валюты
        Currency:
          type: string
          description: Валюта
        RequireConfirmation:
          type: boolean
          description: Требуется подтверждение (двухстадийная схема)
        StartDate:
          type: string
          description: Дата начала (формат /Date(...)/)
        StartDateIso:
          type: string
          description: Дата начала ISO
        IntervalCode:
          type: integer
          format: int32
          description: Код интервала
        Interval:
          type: string
          description: Интервал
        Period:
          type: integer
          format: int32
          description: Период
        MaxPeriods:
          type: integer
          format: int32
          description: Максимальное количество платежей
        CultureName:
          type: string
          description: Язык
        StatusCode:
          type: integer
          format: int32
          description: Код статуса
        Status:
          type: string
          description: Статус
        SuccessfulTransactionsNumber:
          type: integer
          format: int32
          description: Количество успешных транзакций
        FailedTransactionsNumber:
          type: integer
          format: int32
          description: Количество неуспешных транзакций
        LastTransactionDate:
          type: string
          description: Дата последней транзакции
        LastTransactionDateIso:
          type: string
          description: Дата последней транзакции ISO
        NextTransactionDate:
          type: string
          description: Дата следующей транзакции
        NextTransactionDateIso:
          type: string
          description: Дата следующей транзакции ISO
        Receipt:
          type: object
          unevaluatedProperties: {}
          description: Данные чека
        FailoverSchemeId:
          type: string
          description: ID схемы фейловера
      description: Модель подписки на рекуррентные платежи
    SubscriptionUpdateRequest:
      type: object
      required:
        - Id
      properties:
        Id:
          type: string
          description: Идентификатор подписки
        Description:
          type: string
          description: Описание платежа
        Amount:
          type: number
          format: double
          description: Сумма платежа
        Currency:
          type: string
          description: Валюта
        RequireConfirmation:
          type: boolean
          description: Требуется подтверждение
        StartDate:
          type: string
          format: date-time
          description: Дата и время следующего платежа (UTC)
        Interval:
          type: string
          description: 'Интервал: Day, Week, Month'
        Period:
          type: integer
          format: int32
          description: Период
        MaxPeriods:
          type: integer
          format: int32
          description: Максимальное количество платежей
        CustomerReceipt:
          type: object
          unevaluatedProperties: {}
          description: Данные для онлайн-чека
        CultureName:
          type: string
          description: Язык уведомлений (ru-RU, en-US)
      description: Запрос на изменение подписки
    ThreeDsRequiredModel:
      type: object
      required:
        - TransactionId
        - PaReq
        - AcsUrl
        - IFrameIsAllowed
        - ThreeDsCallbackId
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции (используется как MD)
        PaReq:
          type: string
          description: Параметр PaReq для ACS
        GoReq:
          type: string
          description: Параметр GoReq (опционально)
        AcsUrl:
          type: string
          description: URL сервера аутентификации (ACS)
        ThreeDsSessionData:
          type: string
          description: Данные сессии 3DS
        IFrameIsAllowed:
          type: boolean
          description: Разрешено ли использовать iframe
        FrameWidth:
          type: integer
          format: int32
          description: Ширина фрейма
        FrameHeight:
          type: integer
          format: int32
          description: Высота фрейма
        ThreeDsCallbackId:
          type: string
          description: ID callback для 3DS
        EscrowAccumulationId:
          type: string
          description: ID накопления для безопасной сделки
      description: Модель ответа, требующего 3-D Secure аутентификацию
    TokenPaymentRequest:
      type: object
      required:
        - Amount
        - AccountId
        - TrInitiatorCode
        - Token
      properties:
        Amount:
          type: number
          format: double
          description: Сумма платежа (до 2 знаков после точки)
        Currency:
          type: string
          description: Валюта (RUB по умолчанию)
        AccountId:
          type: string
          description: Идентификатор пользователя
        TrInitiatorCode:
          type: integer
          format: int32
          description: 'Признак инициатора транзакции: 0 — мерчант, 1 — держатель карты'
        PaymentScheduled:
          type: integer
          format: int32
          description: 'Признак регулярного платежа: 0 — нет, 1 — да'
        Token:
          type: string
          description: Токен карты
        InvoiceId:
          type: string
          description: Номер заказа
        Description:
          type: string
          description: Описание платежа
        IpAddress:
          type: string
          description: IP-адрес плательщика
        Email:
          type: string
          description: Email плательщика
        Payer:
          allOf:
            - $ref: '#/components/schemas/Payer'
          description: Информация о плательщике
        JsonData:
          type: object
          unevaluatedProperties: {}
          description: Дополнительные данные (JSON)
      description: Запрос на оплату по токену (рекарринг)
    TransactionModel:
      type: object
      required:
        - ReasonCode
        - PublicId
        - TerminalUrl
        - TransactionId
        - Amount
        - Currency
        - CurrencyCode
        - PaymentAmount
        - PaymentCurrency
        - PaymentCurrencyCode
        - CreatedDate
        - CreatedDateIso
        - TestMode
        - IpAddress
        - IpCountry
        - CardFirstSix
        - CardLastFour
        - CardExpDate
        - CardType
        - IssuerBankCountry
        - Issuer
        - CardTypeCode
        - Status
        - StatusCode
        - CultureName
        - Reason
        - CardHolderMessage
        - Type
        - Refunded
        - GatewayName
        - AndroidPay
        - WalletType
        - TotalFee
      properties:
        ReasonCode:
          type: integer
          format: int32
          description: Код причины отклонения (0 = успех)
        PublicId:
          type: string
          description: Public ID терминала
        TerminalUrl:
          type: string
          description: URL терминала
        TransactionId:
          type: integer
          format: int64
          description: Номер транзакции
        Amount:
          type: number
          format: double
          description: Сумма платежа
        Currency:
          type: string
          description: Валюта платежа
        CurrencyCode:
          type: integer
          format: int32
          description: Код валюты
        PaymentAmount:
          type: number
          format: double
          description: Сумма платежа в валюте оплаты
        PaymentCurrency:
          type: string
          description: Валюта оплаты
        PaymentCurrencyCode:
          type: integer
          format: int32
          description: Код валюты оплаты
        InvoiceId:
          type: string
          description: Номер заказа
        AccountId:
          type: string
          description: Идентификатор пользователя
        Email:
          type: string
          description: Email плательщика
        Description:
          type: string
          description: Описание платежа
        JsonData:
          type: string
          description: Дополнительные данные JSON
        CreatedDate:
          type: string
          description: Дата создания (формат /Date(...)/)
        PayoutDate:
          type: string
          description: Дата выплаты
        PayoutDateIso:
          type: string
          description: Дата выплаты ISO
        PayoutAmount:
          type: number
          format: double
          description: Сумма выплаты
        CreatedDateIso:
          type: string
          description: Дата создания ISO
        AuthDate:
          type: string
          description: Дата авторизации
        AuthDateIso:
          type: string
          description: Дата авторизации ISO
        ConfirmDate:
          type: string
          description: Дата подтверждения
        ConfirmDateIso:
          type: string
          description: Дата подтверждения ISO
        AuthCode:
          type: string
          description: Код авторизации
        TestMode:
          type: boolean
          description: Режим тестирования
        Rrn:
          type: string
          description: Retrieval Reference Number
        OriginalTransactionId:
          type: integer
          format: int64
          description: ID оригинальной транзакции
        FallBackScenarioDeclinedTransactionId:
          type: integer
          format: int64
          description: ID отклоненной транзакции fallback сценария
        IpAddress:
          type: string
          description: IP-адрес плательщика
        IpCountry:
          type: string
          description: Страна по IP
        IpCity:
          type: string
          description: Город по IP
        IpRegion:
          type: string
          description: Регион по IP
        IpDistrict:
          type: string
          description: Округ по IP
        IpLatitude:
          type: number
          format: double
          description: Широта по IP
        IpLongitude:
          type: number
          format: double
          description: Долгота по IP
        CardFirstSix:
          type: string
          description: Первые 6 цифр карты
        CardLastFour:
          type: string
          description: Последние 4 цифры карты
        CardExpDate:
          type: string
          description: Срок действия карты
        CardType:
          type: string
          description: Тип карты (Visa, MasterCard, etc.)
        CardProduct:
          type: string
          description: Продукт карты
        CardCategory:
          type: string
          description: Категория карты
        EscrowAccumulationId:
          type: string
          description: ID накопления для безопасной сделки
        IssuerBankCountry:
          type: string
          description: Страна банка-эмитента
        Issuer:
          type: string
          description: Банк-эмитент
        CardTypeCode:
          type: integer
          format: int32
          description: Код типа карты
        Status:
          type: string
          description: Статус транзакции (текст)
        StatusCode:
          type: integer
          format: int32
          description: Код статуса транзакции
        CultureName:
          type: string
          description: Язык
        Reason:
          type: string
          description: Причина (текст)
        CardHolderMessage:
          type: string
          description: Сообщение для держателя карты
        Type:
          type: integer
          format: int32
          description: Тип операции
        Refunded:
          type: boolean
          description: Признак возврата
        Name:
          type: string
          description: Имя держателя карты
        Token:
          type: string
          description: Токен карты для повторных платежей
        SubscriptionId:
          type: string
          description: ID подписки
        GatewayName:
          type: string
          description: Имя шлюза
        AndroidPay:
          type: boolean
          description: Признак Android Pay
        WalletType:
          type: string
          description: Тип кошелька
        TotalFee:
          type: number
          format: double
          description: Общая комиссия
      description: Модель транзакции в ответе API
    TransactionStatus:
      type: string
      enum:
        - AwaitingAuthentication
        - Authorized
        - Completed
        - Cancelled
        - Declined
      description: Статус транзакции (текст)
    Versions:
      type: string
      enum:
        - 1.0.0
    VoidRequest:
      type: object
      required:
        - TransactionId
      properties:
        TransactionId:
          type: integer
          format: int64
          description: ID транзакции
      description: Запрос на отмену платежа
servers:
  - url: https://api.cloudpayments.ru
    description: Production API
    variables: {}
